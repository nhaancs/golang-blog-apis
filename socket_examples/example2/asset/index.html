<!doctype html>
<head>
    <title>Demo socket 200lab </title>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
</head>
<body>
    <div id="main"> <h1>Demo Socket IO</h1> </div>
    <script>
        const socket = io("", { transports: ['websocket'] });
        var locTimer = null;
        socket.on('connect', () => {
            console.log('Client connected');
            // socket.emit('greeting', 'Hello server');
            // socket.emit('sendInfo', { name: "Viet Tran", age: 32 });
            socket.emit('authenticate', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjp7InVzZXJfaWQiOjIsInJvbGUiOiJ1c2VyIn0sImV4cCI6MTYyNDkyMDM0MywiaWF0IjoxNjIyMzI4MzQzfQ.BfCCQIAswC_01OE74DmJJi5vhIb8G_DT4BI4vp0-kws');
        })
        socket.on('sendInfo', (p) => console.log("server returns:", p));
        socket.on('your_profile', (msg) => console.log('your profile:', msg));
        socket.on('authentication_failed', (msg) => console.log('authentication_failed:', msg));
        socket.on('disconnect', () => console.log('Socket is disconnected'));
        // socket.on('authenticated', (msg) => {
        //     console.log('authenticated', msg)

        //     if (locTimer != null) {
        //         clearInterval(locTimer)
        //     }

        //     locTimer = setInterval(() => {
        //         socket.emit('UserUpdateLocation', {lat: 10.7900422, lng: 106.6623443})
        //     }, 3000)
        // });
    </script>
</body>
</html>